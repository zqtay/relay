"use strict";(self.webpackChunkrelay=self.webpackChunkrelay||[]).push([[271],{9271:function(e,n,t){t.r(n),t.d(n,{default:function(){return I}});var r=t(2982),o=t(8683),a=t(885),d=t(2791),s=t(3504),i=t(184),c=function(e){var n=e.wordIndex,t=e.mode,r=e.state,s=e.selected,c=e.setSelected,l=r.inputs[n],x=r.hints[n],f=(0,d.useState)(l.split("")),h=(0,a.Z)(f,2),v=h[0],b=h[1],w=(0,d.useRef)(null);(0,d.useEffect)((function(){b(l.split(""))}),[l]);var m="wordbox";return s.wordIndex===n&&(m+=" wordbox-selected"),(0,i.jsx)("div",{tabIndex:0,className:m,ref:w,onClick:function(){c((function(e){return(0,o.Z)((0,o.Z)({},e),{},{wordIndex:n})}))},onBlur:function(){c({wordIndex:-1,charIndex:-1})},children:(0,i.jsx)(u,{charArray:v,wordIndex:n,selected:s,hint:x,mode:t,updateSelected:function(e){c({wordIndex:n,charIndex:e})}})})},u=function(e){for(var n=e.charArray,t=e.wordIndex,r=e.selected,o=e.hint,a=e.mode,d=e.updateSelected,s=[],c=null,u=function(e){c=l(t,e,r,o[e],a),s.push((0,i.jsxs)("div",{className:c,onClick:function(){return d(e)},children:[(0,i.jsx)("div",{className:"charbox-text",children:n[e]}),(0,i.jsx)("div",{className:"charbox-underline"})]},e))},x=0;x<n.length;x++)u(x);return(0,i.jsx)(i.Fragment,{children:s})},l=function(e,n,t,r,o){var a="charbox";return" "!==r&&(a+=" charbox-hint"),(n<o.overlapLen&&e>0||n>=o.wordLen-o.overlapLen&&e<o.noOfWords-1)&&(a+=" charbox-overlap"),e===t.wordIndex&&n===t.charIndex&&(a+=" charbox-selected"),a},x=(0,d.memo)(c),f=function(e){var n=e.keys,t=e.boardRef,r=function(e){e.preventDefault()};return(0,i.jsx)("div",{children:n.map((function(e,n){return(0,i.jsx)("div",{className:"btn key-button",onClick:function(n){return function(e,n){var r=new KeyboardEvent("keydown_buttons",{key:e});t.current.dispatchEvent(r)}(e)},onMouseDown:r,children:e},n)}))})},h=t(917),v=t(8587),b=(0,d.lazy)((function(){return t.e(940).then(t.bind(t,7940))})),w=function(e){var n=(0,d.useState)(v.BH),t=(0,a.Z)(n,2),c=t[0],u=t[1],l=(0,d.useState)(v.vJ),w=(0,a.Z)(l,2),I=w[0],j=w[1],C=(0,d.useState)([]),k=(0,a.Z)(C,2),y=k[0],E=k[1],N=(0,d.useState)({wordIndex:-1,charIndex:-1}),Z=(0,a.Z)(N,2),g=Z[0],S=Z[1],R=(0,d.useState)({res:null,data:""}),q=(0,a.Z)(R,2),A=q[0],L=q[1],D=(0,d.useState)(!1),O=(0,a.Z)(D,2),W=O[0],z=O[1],B=(0,s.lr)(),H=(0,a.Z)(B,2),M=H[0],K=(H[1],(0,d.useRef)(null));(0,d.useEffect)((function(){var e,n=M.get("puzzle");e=null!==n?h.q.genPuzzleFromEncoded(n):h.q.genPuzzle(),u(h.q.getMode().data),j(e.data),E(h.q.getKeys().data),z(!1)}),[M]);var P=function(e){var n=g.wordIndex,t=g.charIndex;if(!(t>=c.wordLen||t<0)){var a=e.key.toUpperCase(),d=(0,r.Z)(I.inputs),s=d[n].split(""),i=I.hints[n];1===a.length?(t<c.wordLen&&" "===i[t]&&(s[t]=a,d[n]=s.join(""),j((function(e){return(0,o.Z)((0,o.Z)({},e),{},{inputs:d})}))),t<c.wordLen-1&&t++):"DELETE"===a||"BACKSPACE"===a?(" "===i[t]&&(s[t]=" ",d[n]=s.join(""),j((function(e){return(0,o.Z)((0,o.Z)({},e),{},{inputs:d})}))),"BACKSPACE"===a&&t>0&&t--):"ENTER"===a?function(e,n){var t=h.q.validateInput(e,n);L(t)}(n,s.join("")):"ARROWLEFT"===a?t>0&&t--:"ARROWRIGHT"===a?t<c.wordLen-1&&t++:"ARROWUP"===a?n>0&&n--:"ARROWDOWN"===a&&n<c.noOfWords-1&&n++,S({wordIndex:n,charIndex:t})}};return(0,d.useEffect)((function(){var e=K.current;return e.addEventListener("keydown_buttons",P),function(){e.removeEventListener("keydown_buttons",P)}}),[P]),(0,i.jsxs)("div",{className:"container board",children:[(0,i.jsx)("div",{tabIndex:0,className:"board-panel",ref:K,onKeyDown:P,children:I.inputs.map((function(e,n){return(0,i.jsx)(x,{wordIndex:n,mode:c,state:I,selected:g,setSelected:S},n)}))}),(0,i.jsxs)("div",{className:"board-control",children:[(0,i.jsx)("div",{children:"".concat(A.data)}),(0,i.jsx)(m,{onClickClear:function(){var e=(0,o.Z)({},I);e.inputs=(0,r.Z)(e.hints),j(e)},onClickHint:function(){var e=null;if((e=-1===g.charIndex?h.q.addHint(g.wordIndex):h.q.addHint(g.wordIndex,g.charIndex)).status===v.bb){var n=(0,o.Z)({},I),t=K.current.getElementsByClassName("wordbox")[g.wordIndex].textContent;n.hints=(0,r.Z)(h.q.getHints().data),n.inputs[g.wordIndex]=t.slice(0,e.data.index)+e.data.hint+t.slice(e.data.index+1),j(n)}else L(e)},onClickValidate:function(){if(!(g.wordIndex<0||g.wordIndex>=c.noOfWords)){var e=K.current.getElementsByClassName("wordbox")[g.wordIndex].textContent,n=h.q.validateInput(g.wordIndex,e);L(n)}}}),(0,i.jsx)(f,{keys:y,boardRef:K}),(0,i.jsx)("div",{className:"btn board-button board-submit-button",onClick:function(){var e=Array.from(K.current.getElementsByClassName("wordbox")).map((function(e){return e.textContent})),n=h.q.validateAll(e);L(n),n.status===v.bb&&z(!0)},onMouseDown:p,children:"Submit"})]}),(0,i.jsx)(d.Suspense,{children:(0,i.jsx)(b,{show:W,inputs:I.inputs,solution:h.q.getSolution().data,url:h.q.getEncodedFromSettings().data,dismiss:function(){return z(!1)}})})]})},m=function(e){var n=e.onClickClear,t=e.onClickHint,r=e.onClickValidate;return(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"fa-2x",onClick:n,onMouseDown:p,children:(0,i.jsx)("i",{className:"fa-solid fa-rotate-right board-icon-button"})}),(0,i.jsx)("span",{className:"fa-2x",onClick:t,onMouseDown:p,children:(0,i.jsx)("i",{className:"fa-solid fa-square-h board-icon-button"})}),(0,i.jsx)("span",{className:"fa-2x",onClick:r,onMouseDown:p,children:(0,i.jsx)("i",{className:"fa-regular fa-circle-check board-icon-button"})})]})},p=function(e){e.preventDefault()},I=(0,d.memo)(w)}}]);
//# sourceMappingURL=271.4510087c.chunk.js.map