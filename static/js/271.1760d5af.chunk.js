"use strict";(self.webpackChunkrelay=self.webpackChunkrelay||[]).push([[271],{9271:function(e,n,t){t.r(n),t.d(n,{default:function(){return m}});var r=t(2982),o=t(8683),a=t(885),d=t(2791),s=t(3504),i=t(184),c=function(e){var n=e.wordIndex,t=e.mode,r=e.state,s=e.selected,c=e.setSelected,l=r.inputs[n].toUpperCase(),x=r.hints[n],f=(0,d.useState)(l.split("")),h=(0,a.Z)(f,2),v=h[0],w=h[1],b=(0,d.useRef)(null);(0,d.useEffect)((function(){w(l.split(""))}),[l]);var p="wordbox";return s.wordIndex===n&&(p+=" wordbox-selected"),(0,i.jsx)("div",{tabIndex:0,className:p,ref:b,onClick:function(){c((function(e){return(0,o.Z)((0,o.Z)({},e),{},{wordIndex:n})}))},onBlur:function(){c({wordIndex:-1,charIndex:-1})},children:(0,i.jsx)(u,{charArray:v,wordIndex:n,selected:s,hint:x,mode:t,updateSelected:function(e){c({wordIndex:n,charIndex:e})}})})},u=function(e){for(var n=e.charArray,t=e.wordIndex,r=e.selected,o=e.hint,a=e.mode,d=e.updateSelected,s=[],c=null,u=function(e){c=l(t,e,r,o[e],a),s.push((0,i.jsxs)("div",{className:c,onClick:function(){return d(e)},children:[(0,i.jsx)("div",{className:"charbox-text",children:n[e]}),(0,i.jsx)("div",{className:"charbox-underline"})]},e))},x=0;x<n.length;x++)u(x);return(0,i.jsx)(i.Fragment,{children:s})},l=function(e,n,t,r,o){var a="charbox";return" "!==r&&(a+=" charbox-hint"),(n<o.overlapLen&&e>0||n>=o.wordLen-o.overlapLen&&e<o.noOfWords-1)&&(a+=" charbox-overlap"),e===t.wordIndex&&n===t.charIndex&&(a+=" charbox-selected"),a},x=(0,d.memo)(c),f=function(e){var n=e.keys,t=e.boardRef,r=function(e){e.preventDefault()};return(0,i.jsx)("div",{children:n.map((function(e,n){return(0,i.jsx)("div",{className:"btn key-button",onClick:function(n){return function(e,n){var r=new KeyboardEvent("keydown_buttons",{key:e});t.current.dispatchEvent(r)}(e)},onMouseDown:r,children:e.toUpperCase()},n)}))})},h=t(917),v=t(8587),w=function(e){var n=(0,d.useState)(v.BH),t=(0,a.Z)(n,2),c=t[0],u=t[1],l=(0,d.useState)(v.vJ),w=(0,a.Z)(l,2),m=w[0],I=w[1],C=(0,d.useState)([]),j=(0,a.Z)(C,2),k=j[0],y=j[1],E=(0,d.useState)({wordIndex:-1,charIndex:-1}),N=(0,a.Z)(E,2),Z=N[0],g=N[1],R=(0,d.useState)({res:null,data:""}),S=(0,a.Z)(R,2),A=S[0],q=S[1],L=(0,s.lr)(),D=(0,a.Z)(L,2),O=D[0],W=(D[1],(0,d.useRef)(null));(0,d.useEffect)((function(){var e,n=O.get("puzzle");e=null!==n?h.q.genPuzzleFromEncoded(n):h.q.genPuzzle(),u(h.q.getMode().data),I(e.data),y(h.q.getKeys().data)}),[O]);var B=function(e){var n=Z.wordIndex,t=Z.charIndex;if(!(t>=c.wordLen||t<0)){var a=e.key.toUpperCase(),d=(0,r.Z)(m.inputs),s=d[n].split(""),i=m.hints[n];1===a.length?(t<c.wordLen&&" "===i[t]&&(s[t]=a,d[n]=s.join(""),I((function(e){return(0,o.Z)((0,o.Z)({},e),{},{inputs:d})}))),t<c.wordLen-1&&t++):"DELETE"===a||"BACKSPACE"===a?(" "===i[t]&&(s[t]=" ",d[n]=s.join(""),I((function(e){return(0,o.Z)((0,o.Z)({},e),{},{inputs:d})}))),"BACKSPACE"===a&&t>0&&t--):"ENTER"===a?function(e,n){var t=h.q.validateInput(e,n);q(t)}(n,s.join("")):"ARROWLEFT"===a?t>0&&t--:"ARROWRIGHT"===a?t<c.wordLen-1&&t++:"ARROWUP"===a?n>0&&n--:"ARROWDOWN"===a&&n<c.noOfWords-1&&n++,g({wordIndex:n,charIndex:t})}};return(0,d.useEffect)((function(){var e=W.current;return e.addEventListener("keydown_buttons",B),function(){e.removeEventListener("keydown_buttons",B)}}),[B]),(0,i.jsxs)("div",{className:"container board",children:[(0,i.jsx)("div",{tabIndex:0,className:"board-panel",ref:W,onKeyDown:B,children:m.inputs.map((function(e,n){return(0,i.jsx)(x,{wordIndex:n,mode:c,state:m,selected:Z,setSelected:g},n)}))}),(0,i.jsxs)("div",{className:"board-control",children:[(0,i.jsx)("div",{children:"".concat(A.data)}),(0,i.jsx)(b,{onClickClear:function(){var e=(0,o.Z)({},m);e.inputs=(0,r.Z)(e.hints),I(e)},onClickHint:function(){var e=null;if((e=-1===Z.charIndex?h.q.addHint(Z.wordIndex):h.q.addHint(Z.wordIndex,Z.charIndex)).status===v.bb){var n=(0,o.Z)({},m),t=W.current.getElementsByClassName("wordbox")[Z.wordIndex].textContent;n.hints=(0,r.Z)(h.q.getHints().data),n.inputs[Z.wordIndex]=t.slice(0,e.data.index)+e.data.hint+t.slice(e.data.index+1),I(n)}else q(e)},onClickValidate:function(){if(!(Z.wordIndex<0||Z.wordIndex>=c.noOfWords)){var e=W.current.getElementsByClassName("wordbox")[Z.wordIndex].textContent,n=h.q.validateInput(Z.wordIndex,e);q(n)}}}),(0,i.jsx)(f,{keys:k,boardRef:W}),(0,i.jsx)("div",{className:"btn board-button board-submit-button",onClick:function(){var e=Array.from(W.current.getElementsByClassName("wordbox")).map((function(e){return e.textContent}));q(h.q.validateAll(e))},onMouseDown:p,children:"Submit"})]})]})},b=function(e){var n=e.onClickClear,t=e.onClickHint,r=e.onClickValidate;return(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"fa-2x",onClick:n,onMouseDown:p,children:(0,i.jsx)("i",{className:"fa-solid fa-rotate-right board-icon-button"})}),(0,i.jsx)("span",{className:"fa-2x",onClick:t,onMouseDown:p,children:(0,i.jsx)("i",{class:"fa-solid fa-square-h board-icon-button"})}),(0,i.jsx)("span",{className:"fa-2x",onClick:r,onMouseDown:p,children:(0,i.jsx)("i",{className:"fa-regular fa-circle-check board-icon-button"})})]})},p=function(e){e.preventDefault()},m=(0,d.memo)(w)}}]);
//# sourceMappingURL=271.1760d5af.chunk.js.map